<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Portfolio de Pedro Cruz, fotógrafo. Photography · Improvisation · Presence">
<meta property="og:title" content="Pedro Cruz - Photography Portfolio">
<meta property="og:description" content="Photography · Improvisation · Presence">
<meta property="og:type" content="website">
<title>Pedro Cruz</title>

<style>
:root {
  --bg-primary: #0b0b0b;
  --text-primary: #eaeaea;
  --transition-speed: 0.3s;
  --card-shadow: 0 2px 4px rgba(0,0,0,0.1), 0 8px 16px rgba(0,0,0,0.2);
  --card-hover-shadow: 0 4px 8px rgba(0,0,0,0.15), 0 12px 24px rgba(0,0,0,0.3), 0 20px 40px rgba(0,0,0,0.4);
}

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: Helvetica, Arial, sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.6;
  scroll-behavior: smooth;
}

header {
  min-height: 60vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  padding: 0 20px;
  background: linear-gradient(rgba(11,11,11,0.9), rgba(11,11,11,0.7));
}

header h1 { font-size: clamp(2rem, 5vw, 2.5rem); margin:0; font-weight:400; }
header p { margin-top:12px; font-size: clamp(.9rem,2.5vw,1rem); opacity:0.85; }

.lang-switch {
  position:absolute;
  top:20px;
  right:20px;
  font-size:.8rem;
}
.lang-switch span {
  margin-left:8px; cursor:pointer; padding:4px 8px; border-radius:4px;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
}
.lang-switch span:hover, .lang-switch span:focus { background: rgba(255,255,255,0.1); outline:none; }
.lang-switch span.active { text-decoration:underline; opacity:1; background: rgba(255,255,255,0.15); }

section { max-width:1400px; margin:0 auto; padding: clamp(60px,6vw,120px) 24px; }

.about { max-width:720px; margin:0 auto; font-size:.95rem; opacity:.85; }
.about p { margin-bottom:1.4em; font-size:clamp(0.9rem,1.5vw,1rem); }

.project-meta { text-align:center; margin-bottom:50px; scroll-margin-top:80px; }
.project-meta h2 { font-size: clamp(1.2rem,3vw,1.5rem); font-weight:400; margin-bottom:8px; }
.project-meta p { font-size:.9rem; opacity:.85; margin:4px 0; }

.projects {
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(min(300px,100%),1fr));
  gap:30px;
}

.card {
  position:relative;
  cursor:pointer;
  border-radius:12px;
  overflow:hidden;
  transition: transform var(--transition-speed), box-shadow var(--transition-speed);
  will-change: transform;
  background: linear-gradient(90deg,#1a1a1a 0%,#2a2a2a 50%,#1a1a1a 100%);
  background-size: 200% 100%;
  box-shadow: var(--card-shadow);
  outline: none;
  aspect-ratio: 4/3;
}

.card:active { transform:scale(0.98); }
.card-inner { width:100%; height:100%; position:relative; }
.card-img-container { width:100%; height:100%; display:flex; align-items:center; justify-content:center; overflow:hidden; position:relative; }
.card-img { width:100%; height:100%; object-fit:cover; transition:transform var(--transition-speed); display:block; }
.card-img.vertical { object-fit:contain; width:auto; max-width:100%; max-height:100%; margin:0 auto; }

.card-overlay {
  position:absolute; top:0; left:0; right:0; bottom:0;
  background:rgba(0,0,0,0); transition:background var(--transition-speed); pointer-events:none;
}
.card:hover .card-overlay { background:rgba(0,0,0,0.2); }

.card.loading { animation:loading 1.5s infinite; }
@keyframes loading { 0% { background-position:200% 0; } 100% { background-position:-200% 0; } }

.card:hover { transform:scale(1.03); box-shadow: var(--card-hover-shadow); }
.card:hover .card-img { transform:scale(1.05); }
.card:focus { outline:2px solid var(--text-primary); outline-offset:4px; transform:scale(1.02); }

.lightbox {
  position:fixed; inset:0; background:rgba(0,0,0,.98); display:flex;
  flex-direction:column; align-items:center; justify-content:center;
  padding:40px; z-index:9999; cursor:pointer; opacity:0; transition:opacity var(--transition-speed); display:none;
}
.lightbox.active { display:flex; opacity:1; }
.lightbox img { max-width:min(92vw,1200px); max-height:82vh; border-radius:8px; object-fit:contain; animation:fadeIn 0.3s ease; }
@keyframes fadeIn { from { opacity:0; transform:scale(0.95); } to { opacity:1; transform:scale(1); } }

.lightbox .caption { margin-top:20px; font-size:.85rem; opacity:.9; text-align:center; background:rgba(0,0,0,0.5); padding:8px 16px; border-radius:8px; max-width:80%; }
.lightbox-counter { position:absolute; top:20px; left:20px; color:white; opacity:0.7; font-size:.9rem; background:rgba(0,0,0,0.5); padding:6px 12px; border-radius:20px; z-index:10001; }

.lightbox .prev, .lightbox .next {
  position:absolute; top:50%; transform:translateY(-50%);
  font-size:3rem; color:#fff; cursor:pointer; user-select:none;
  opacity:.7; transition:opacity .2s, background .2s;
  padding:20px 10px; z-index:10000; border-radius:4px; outline:none;
}
.lightbox .prev:hover, .lightbox .next:hover, .lightbox .prev:focus, .lightbox .next:focus { opacity:1; background: rgba(255,255,255,0.1); }
.lightbox .prev { left:20px; } .lightbox .next { right:20px; }

.lightbox .close {
  position:absolute; top:20px; right:20px; font-size:2rem; color:#fff; cursor:pointer;
  opacity:.7; transition:opacity .2s, background .2s; padding:10px; z-index:10000;
  border-radius:4px; line-height:1; width:40px; height:40px; display:flex; align-items:center; justify-content:center; outline:none;
}
.lightbox .close:hover, .lightbox .close:focus { opacity:1; background: rgba(255,255,255,0.1); }

.loading-spinner {
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  width:40px; height:40px; border:3px solid rgba(255,255,255,0.2); border-top-color:#fff; border-radius:50%;
  animation:spin 1s linear infinite; z-index:1; box-shadow:0 0 10px rgba(255,255,255,0.3);
}
@keyframes spin { to { transform:translate(-50%,-50%) rotate(360deg); } }

footer { padding:60px 20px; text-align:center; font-size:.8rem; opacity:.7; border-top:1px solid rgba(255,255,255,0.1); }

#backTop {
  position:fixed; bottom:20px; right:20px; background:var(--text-primary); color:var(--bg-primary);
  padding:10px 14px; border-radius:50%; font-size:1.2rem; cursor:pointer; opacity:.6; transition:opacity var(--transition-speed), transform .2s; z-index:999; border:none; outline:none;
}
#backTop:hover,#backTop:focus { opacity:1; transform:scale(1.1); outline:2px solid #fff; outline-offset:2px; }
#backTop.hidden { display:none; }

.project-nav {
  position:fixed; top:50%; left:20px; transform:translateY(-50%); z-index:100; display:none;
}
@media(min-width:1200px){ .project-nav{ display:block; } }
.project-nav a {
  display:block; color:var(--text-primary); text-decoration:none; font-size:.8rem; opacity:.6;
  padding:8px 12px; margin:4px 0; border-left:2px solid transparent; transition:all 0.3s; outline:none;
}
.project-nav a:hover, .project-nav a:focus, .project-nav a.active {
  opacity:1; border-left-color:var(--text-primary); background: rgba(255,255,255,0.05);
}

.fade-in { animation:fadeInUp 0.6s ease-out forwards; opacity:0; }
@keyframes fadeInUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }

@media(max-width:768px){
  section{padding:60px 16px;}
  .lightbox{padding:20px;}
  .lightbox .prev,.lightbox .next{font-size:2.5rem;padding:15px 5px;}
  .lightbox .close{top:15px; right:15px;}
  .lightbox-counter{top:15px; left:15px; font-size:.8rem;}
  .project-nav{display:none;}
}
</style>
</head>
<body>

<header class="fade-in">
  <div class="lang-switch">
    <span id="btn-pt" class="active" onclick="setLang('pt')" tabindex="0">PT</span>
    <span id="btn-en" onclick="setLang('en')" tabindex="0">EN</span>
  </div>
  <div>
    <h1>Pedro Cruz</h1>
    <p>Photography · Improvisation · Presence</p>
  </div>
</header>

<nav class="project-nav" id="project-nav">
  <!-- Links serão preenchidos via JS -->
</nav>

<section class="fade-in">
  <div class="about">
    <div class="lang-pt">
      <p>Nasci em 1971. A fotografia entrou cedo na minha vida como espaço de observação e experimentação.</p>
    </div>
    <div class="lang-en" style="display:none;">
      <p>I was born in 1971. Photography entered my life early as a space for observation and experimentation.</p>
    </div>
  </div>
</section>

<section>
<!-- Projects -->
<div class="project-meta fade-in" id="project-1">
  <h2 data-title-pt="From Blue Walls to White Silence" data-title-en="From Blue Walls to White Silence">From Blue Walls to White Silence</h2>
  <p>Chefchaouen · 2007</p>
</div>
<div class="projects" id="projects-cor"></div>

<div class="project-meta fade-in" id="project-2">
  <h2 data-title-pt="Under the Same Weather" data-title-en="Under the Same Weather">Under the Same Weather</h2>
  <p>2012</p>
</div>
<div class="projects" id="projects-pb"></div>

<div class="project-meta fade-in" id="project-3">
  <h2 data-title-pt="Inside the Sound" data-title-en="Inside the Sound">Inside the Sound</h2>
  <p>2024</p>
</div>
<div class="projects" id="projects-mia"></div>

<div class="project-meta fade-in" id="project-4">
  <h2 data-title-pt="Last Night" data-title-en="Last Night">Last Night</h2>
  <p>2016</p>
</div>
<div class="projects" id="projects-cas"></div>
</section>

<footer class="fade-in">
  <p>© 2025 — Pedro Cruz</p>
  <p style="font-size:0.7rem; margin-top:10px; opacity:0.5;">All photographs are copyright protected</p>
</footer>

<button id="backTop" class="hidden" onclick="window.scrollTo({top:0,behavior:'smooth'})">↑</button>

<div class="lightbox" id="lightbox">
  <span class="prev" onclick="prevImage(event)">‹</span>
  <img id="lightbox-img" alt="">
  <span class="next" onclick="nextImage(event)">›</span>
  <div class="close" onclick="closeLightbox()">×</div>
  <div class="lightbox-counter" id="lightbox-counter"></div>
  <div class="caption" id="lightbox-caption"></div>
</div>

<script>
// =================== Config ===================
let currentLang = 'pt';
let currentGroup = null;
let currentIndex = 0;

const imageGroups = {
  cor: { images:["01","02","04","06","07"].map(n=>`./assets/cor/Paisagen_cheff${n}.jpg`),
         titles:{pt:["A Cidade Viva","A Saída","O Observador","Ascensão","Silêncio"],
                 en:["Living City","Exit","Watcher","Ascent","Silence"]}},
  pb: { images:["01","02","03","05","08"].map(n=>`./assets/pb/Paisagen_pb${n}.jpg`),
        titles:{pt:["Antes","Céu","Passagem","Entre","Noite"],
                en:["Before","Sky","Passage","Between","Night"]}},
  mia:{ images:["01","03","05","07","09"].map(n=>`./assets/mia/mia${n}.jpg`),
        titles:{pt:["Antes","Fio","Soltar","Negociação","Declaração"],
                en:["Before","Thread","Release","Negotiation","Statement"]}},
  cas:{ images:["01","02","03","04","05","06","07","08"].map(n=>`./assets/cas/cas${n}.jpg`),
        titles:{pt:["Antes","Fratura","Instável","Suspensa","Eco","Padrão","Colapso","Depois"],
                en:["Before","Fracture","Unstable","Suspended","Echo","Pattern","Collapse","After"]}}
};

// =================== Funções ===================
function isImageVertical(img){ return img.naturalHeight>img.naturalWidth; }

function createCards(groupId){
  const container=document.getElementById('projects-'+groupId);
  imageGroups[groupId].images.forEach((src,i)=>{
    const card=document.createElement('div');
    card.className='card loading';
    card.setAttribute('data-src',src);
    card.tabIndex=0;
    card.setAttribute('role','button');
    card.setAttribute('aria-label','Open image');
    card.onclick=()=>openLightbox(groupId,i);
    card.innerHTML=`<div class="card-inner">
      <div class="card-img-container"><img class="card-img"><div class="card-overlay"></div></div>
      <div class="loading-spinner"></div>
    </div>`;
    container.appendChild(card);
  });
}

function lazyLoadImages(){
  document.querySelectorAll('.card.loading').forEach(card=>{
    const observer=new IntersectionObserver(entries=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          const src=card.getAttribute('data-src');
          const imgEl=card.querySelector('.card-img');
          const img=new Image();
          img.onload=()=>{
            imgEl.src=src;
            if(isImageVertical(img)) imgEl.classList.add('vertical'); else imgEl.classList.remove('vertical');
            card.classList.remove('loading');
            card.setAttribute('data-loaded','true');
            const spinner=card.querySelector('.loading-spinner'); if(spinner) spinner.remove();
          };
          img.src=src;
          observer.unobserve(card);
        }
      });
    },{rootMargin:'100px',threshold:0.1});
    observer.observe(card);
  });
}

function openLightbox(group,i){
  currentGroup=imageGroups[group]; currentIndex=i;
  document.getElementById('lightbox').classList.add('active');
  document.body.style.overflow='hidden';
  updateLightbox();
}

function updateLightbox(){
  const lbImg=document.getElementById('lightbox-img');
  const caption=document.getElementById('lightbox-caption');
  const counter=document.getElementById('lightbox-counter');
  lbImg.style.opacity='0';
  if(counter) counter.textContent=`${currentIndex+1} / ${currentGroup.images.length}`;
  const img=new Image();
  img.onload=()=>{
    lbImg.src=currentGroup.images[currentIndex];
    lbImg.alt=currentGroup.titles[currentLang][currentIndex]||'';
    caption.textContent=currentGroup.titles[currentLang][currentIndex]||'';
    lbImg.style.opacity='1';
  };
  img.src=currentGroup.images[currentIndex];
}

function closeLightbox(){ document.getElementById('lightbox').classList.remove('active'); document.body.style.overflow='auto'; }
function prevImage(e){ e.stopPropagation(); currentIndex=(currentIndex-1+currentGroup.images.length)%currentGroup.images.length; updateLightbox(); }
function nextImage(e){ e.stopPropagation(); currentIndex=(currentIndex+1)%currentGroup.images.length; updateLightbox(); }

document.addEventListener('keydown',e=>{
  if(document.getElementById('lightbox').classList.contains('active')){
    if(e.key==='ArrowLeft') prevImage(e);
    if(e.key==='ArrowRight') nextImage(e);
    if(e.key==='Escape') closeLightbox();
  }
});

function setLang(lang){
  currentLang=lang;
  document.querySelectorAll('.lang-pt').forEach(el=>el.style.display=(lang==='pt')?'block':'none');
  document.querySelectorAll('.lang-en').forEach(el=>el.style.display=(lang==='en')?'block':'none');
  document.getElementById('btn-pt').classList.toggle('active',lang==='pt');
  document.getElementById('btn-en').classList.toggle('active',lang==='en');
  // Atualiza nav lateral
  document.querySelectorAll('#project-nav a').forEach(a=>{ 
    a.textContent=a.getAttribute('data-title-'+lang);
  });
}

window.addEventListener('scroll',()=>{
  document.getElementById('backTop').classList.toggle('hidden', window.scrollY<300);
  // Destaque nav lateral
  const sections = document.querySelectorAll('section .project-meta');
  let currentSection=null;
  sections.forEach(sec=>{
    const rect=sec.getBoundingClientRect();
    if(rect.top<100) currentSection=sec;
  });
  if(currentSection){
    document.querySelectorAll('#project-nav a').forEach(a=>a.classList.remove('active'));
    const link=document.querySelector(`#project-nav a[href="#${currentSection.id}"]`);
    if(link) link.classList.add('active');
  }
});

// =================== Inicialização ===================
['cor','pb','mia','cas'].forEach(createCards);
lazyLoadImages();

// Preenche nav lateral
const nav=document.getElementById('project-nav');
document.querySelectorAll('.project-meta').forEach(sec=>{
  const a=document.createElement('a');
  a.href='#'+sec.id;
  a.setAttribute('data-title-pt',sec.querySelector('h2').getAttribute('data-title-pt'));
  a.setAttribute('data-title-en',sec.querySelector('h2').getAttribute('data-title-en'));
  a.textContent=sec.querySelector('h2').getAttribute('data-title-pt');
  a.tabIndex=0;
  nav.appendChild(a);
});
</script>

</body>
</html>
